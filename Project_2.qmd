---
title: "ST558 - Project 2 - Shinies!"
author: "Laraib Azmat"
format: html
editor: visual
---

```{r Library read in}
library(httr)
library(jsonlite)
library(tidyverse)
```

```{r}
# Inputs Date[string], Curency[string]
# return: I want list[doubles] (conversion rate by courency) 
currency_conversion <- function(date = "latest", apiVersion = "v1", currency){
  URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/",
               apiVersion,
               "/currencies/",
               currency,
               ".json",
               sep = "")
  
  temp_parse <- GET(URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as_tibble() |>
    unnest(cols = currency)

  return(temp_parse)
}
```

```{r}
currency_conversion(, , "zmk")
```

```{r}
currency_names <- function(date = "latest", apiVersion = "v1"){
  currency_api_URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/",
               apiVersion,
               "/currencies.json",
               "",
               sep = "")
  
  name_parsed <- GET(currency_api_URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as.data.frame() |>
    as_tibble()|> 
    mutate(obs.number = row_number()) |>
    pivot_longer(-obs.number,
               values_to = "Currency")
  return(name_parsed)
}
```

```{r}
currency_names(, )
```


```{r}
full_conversion <- function(date = "latest", apiVersion = "v1", currency){
  URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/",
               apiVersion,
               "/currencies/",
               currency,
               ".json",
               sep = "")
  
  temp_parse <- GET(URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as_tibble() |>
    unnest(cols = currency)
  
  currency_api_URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/",
               apiVersion,
               "/currencies.json",
               "",
               sep = "")
  
  name_parse <- GET(currency_api_URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as.data.frame() |>
    as_tibble()|> 
    mutate(obs.number = row_number()) |>
    pivot_longer(-obs.number,
               values_to = "Currency")
  

  return(currency_info)
  
}
```

```{r}
full_conversion(, , "amp")
```


```{r}
amp_api <- httr::GET("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/amp.json")

amp_parsed <- amp_api$content |>
  rawToChar() |>
  fromJSON() |>
  as_tibble() |>
  unnest(cols = amp)


amp_parsed
```

```{r}
name_api <- httr::GET("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies.json")

name_parse <- name_api$content |>
  rawToChar() |>
  fromJSON() |>
  as.data.frame() |>
  as_tibble()|> 
  mutate(obs.number = row_number()) |>
  pivot_longer(-obs.number,
             values_to = "Currency")

name_parse
```

