---
title: "ST558 - Project 2 - Shinies!"
author: "Laraib Azmat"
format: html
editor: visual
---

```{r Library read in}
library(httr)
library(jsonlite)
library(tidyverse)
library(janitor)
```

```{r}
currency_conversion <- function(date = "latest", currency){
  URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/v1/currencies/",
               currency,
               ".json",
               sep = "")
  
  temp_parse <- GET(URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as_tibble()
  
  temp_parse <- bind_rows(temp_parse[[2]], .id = "currency") |>
    pivot_longer(cols = everything())

  return(temp_parse)
}
```

```{r}
currency_conversion(, "zmk")
```

```{r}
currency_names <- function(date = "latest"){
  currency_api_URL <- paste("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@",
               date,
               "/v1/currencies.json",
               sep = "")
  
  name_parse <- GET(currency_api_URL)$content |>
    rawToChar() |>
    fromJSON() |>
    as.data.frame() |>
    as_tibble()|> 
    mutate(obs.number = row_number()) |>
    pivot_longer(-obs.number,
               values_to = "Currency")
  
  name_parse$name <- gsub("^X", "", name_parse$name)

  name_parse$name[1:2] <- gsub("^.", "$", name_parse$name[1:2])

  return(name_parse)
}
```

```{r}
currency_names( )
```

```{r}
"currency_wrapper" 
```


